<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>媒体数据拉取工具</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <!-- 左侧配置区域 -->
        <div class="config-panel">
            <h2>公共配置</h2>
            
            <div class="config-section">
                <h3>基础设置</h3>
                <div class="form-group">
                    <label for="PLATFORM">平台选择</label>
                    <select id="PLATFORM" name="PLATFORM">
                        <option value="xhs" selected>小红书</option>
                    </select>
                </div>
            </div>

            <div class="config-section">
                <h3>登录设置</h3>
                <div class="form-group">
                    <label for="cookie-input">Cookie:</label>
                    <textarea id="cookie-input" name="COOKIES" placeholder="请输入Cookie"></textarea>
                </div>
                <div class="form-group">
                    <label for="UA">User Agent</label>
                    <input type="text" id="UA" name="UA" placeholder="自定义User Agent">
                </div>
            </div>

            <div class="config-section">
                <h3>代理设置</h3>
                <div class="form-group">
                    <label for="ENABLE_IP_PROXY">
                        <input type="checkbox" id="ENABLE_IP_PROXY" name="ENABLE_IP_PROXY">
                        启用IP代理
                    </label>
                </div>
                <div class="form-group">
                    <label for="IP_PROXY_POOL_COUNT">代理IP池数量</label>
                    <input type="number" id="IP_PROXY_POOL_COUNT" name="IP_PROXY_POOL_COUNT" min="1" value="2">
                </div>
                <div class="form-group">
                    <label for="IP_PROXY_PROVIDER_NAME">代理IP提供商</label>
                    <input type="text" id="IP_PROXY_PROVIDER_NAME" name="IP_PROXY_PROVIDER_NAME" value="kuaidaili">
                </div>
                <div class="form-group">
                    <label for="CRAWLER_MAX_SLEEP_SEC">最大拉取间隔(秒)</label>
                    <input type="number" id="CRAWLER_MAX_SLEEP_SEC" name="CRAWLER_MAX_SLEEP_SEC" min="0" value="2">
                </div>
            </div>

            <div class="config-section">
                <h3>浏览器设置</h3>
                <div class="form-group">
                    <label for="HEADLESS">
                        <input type="checkbox" id="HEADLESS" name="HEADLESS" checked>
                        无头浏览器模式
                    </label>
                </div>
                <div class="form-group">
                    <label for="SAVE_LOGIN_STATE">
                        <input type="checkbox" id="SAVE_LOGIN_STATE" name="SAVE_LOGIN_STATE" checked>
                        保存登录状态
                    </label>
                </div>
                <div class="form-group">
                    <label for="USER_DATA_DIR">浏览器缓存目录</label>
                    <input type="text" id="USER_DATA_DIR" name="USER_DATA_DIR" value="%s_user_data_dir">
                </div>
            </div>

            <div class="config-section">
                <h3>数据保存设置</h3>
                <div class="form-group">
                    <label for="SAVE_DATA_OPTION">数据保存类型</label>
                    <select id="SAVE_DATA_OPTION" name="SAVE_DATA_OPTION">
                        <option value="csv">CSV</option>
                        <option value="db" selected>数据库</option>
                        <option value="json">JSON</option>
                    </select>
                </div>
            </div>

            <div class="config-section">
                <h3>拉取控制</h3>
                <div class="form-group">
                    <label for="START_PAGE">开始页数</label>
                    <input type="number" id="START_PAGE" name="START_PAGE" min="1" value="1">
                </div>
                <div class="form-group">
                    <label for="CRAWLER_MAX_NOTES_COUNT">最大拉取数量</label>
                    <input type="number" id="CRAWLER_MAX_NOTES_COUNT" name="CRAWLER_MAX_NOTES_COUNT" min="1" value="1">
                </div>
                <div class="form-group">
                    <label for="MAX_CONCURRENCY_NUM">并发拉取数量</label>
                    <input type="number" id="MAX_CONCURRENCY_NUM" name="MAX_CONCURRENCY_NUM" min="1" value="1">
                </div>
            </div>

            <div class="config-section">
                <h3>内容设置</h3>
                <div class="form-group">
                    <label for="ENABLE_GET_IMAGES">
                        <input type="checkbox" id="ENABLE_GET_IMAGES" name="ENABLE_GET_IMAGES">
                        拉取图片
                    </label>
                </div>
                <div class="form-group">
                    <label for="ENABLE_GET_COMMENTS">
                        <input type="checkbox" id="ENABLE_GET_COMMENTS" name="ENABLE_GET_COMMENTS" checked>
                        拉取评论
                    </label>
                </div>
                <div class="form-group">
                    <label for="CRAWLER_MAX_COMMENTS_COUNT_SINGLENOTES">单帖子最大评论数</label>
                    <input type="number" id="CRAWLER_MAX_COMMENTS_COUNT_SINGLENOTES" name="CRAWLER_MAX_COMMENTS_COUNT_SINGLENOTES" min="1" value="600">
                </div>
                <div class="form-group">
                    <label for="ENABLE_GET_SUB_COMMENTS">
                        <input type="checkbox" id="ENABLE_GET_SUB_COMMENTS" name="ENABLE_GET_SUB_COMMENTS">
                        拉取二级评论
                    </label>
                </div>
            </div>

            <div class="config-section">
                <h3>词云设置</h3>
                <div class="form-group">
                    <label for="ENABLE_GET_WORDCLOUD">
                        <input type="checkbox" id="ENABLE_GET_WORDCLOUD" name="ENABLE_GET_WORDCLOUD" checked>
                        生成评论词云图
                    </label>
                </div>
                <div class="form-group">
                    <label for="STOP_WORDS_FILE">停用词文件路径</label>
                    <input type="text" id="STOP_WORDS_FILE" name="STOP_WORDS_FILE" value="./docs/hit_stopwords.txt">
                </div>
                <div class="form-group">
                    <label for="FONT_PATH">中文字体文件路径</label>
                    <input type="text" id="FONT_PATH" name="FONT_PATH" value="./docs/STZHONGS.TTF">
                </div>
            </div>

            <div class="config-section">
                <h3>数据库设置</h3>
                <div class="form-group">
                    <label for="RELATION_DB_HOST">MySQL主机</label>
                    <input type="text" id="RELATION_DB_HOST" name="RELATION_DB_HOST" value="175.178.151.117">
                </div>
                <div class="form-group">
                    <label for="RELATION_DB_PORT">MySQL端口</label>
                    <input type="number" id="RELATION_DB_PORT" name="RELATION_DB_PORT" value="23308">
                </div>
                <div class="form-group">
                    <label for="RELATION_DB_USER">MySQL用户名</label>
                    <input type="text" id="RELATION_DB_USER" name="RELATION_DB_USER" value="media_crawler">
                </div>
                <div class="form-group">
                    <label for="RELATION_DB_PWD">MySQL密码</label>
                    <input type="password" id="RELATION_DB_PWD" name="RELATION_DB_PWD" value="media_crawler#2025@02">
                </div>
                <div class="form-group">
                    <label for="RELATION_DB_NAME">MySQL数据库名</label>
                    <input type="text" id="RELATION_DB_NAME" name="RELATION_DB_NAME" value="media_crawler">
                </div>
            </div>
        </div>

        <!-- 右侧区域 -->
        <div class="content-panel">
            <!-- 顶部执行按钮 -->
            <div class="action-bar">
                <button id="execute-btn" class="execute-btn">执行</button>
            </div>

            <!-- 中部选项卡 -->
            <div class="tab-container">
                <div class="tab-header">
                    <div class="tab-item active" data-tab="search">关键词搜索</div>
                    <div class="tab-item" data-tab="detail">笔记详情</div>
                </div>
                
                <div class="tab-content">
                    <!-- 搜索选项卡内容 -->
                    <div class="tab-pane active" id="search-tab">
                        <div class="form-group">
                            <label for="KEYWORDS">关键词搜索</label>
                            <input type="text" id="KEYWORDS" name="KEYWORDS" placeholder="多个关键词以英文逗号分隔">
                        </div>
                        <div class="form-group">
                            <label for="SORT_TYPE">排序方式</label>
                            <select id="SORT_TYPE" name="SORT_TYPE">
                                <option value="popularity_descending" selected>按热度降序</option>
                                <option value="time_descending">按时间降序</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <p class="tab-description">通过关键词搜索拉取内容，请输入关键词并选择排序方式。</p>
                        </div>
                    </div>
                    
                    <!-- 详情选项卡内容 -->
                    <div class="tab-pane" id="detail-tab">
                        <div class="form-group">
                            <label for="note-urls">笔记URL列表</label>
                            <div class="url-list-container">
                                <div id="url-list">
                                    <!-- URL列表项将动态添加 -->
                                </div>
                                <div class="url-actions">
                                    <button id="add-url-btn">添加URL</button>
                                    <button id="clear-urls-btn">清空</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 状态消息区域 -->
            <div class="status-container">
                <div id="status-message" class="status-info">准备就绪，请配置并执行拉取任务</div>
            </div>
        </div>
    </div>

    <!-- URL输入弹窗 -->
    <div id="url-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>添加笔记URL</h3>
            <div class="form-group">
                <input type="text" id="url-input" placeholder="请输入小红书笔记URL">
            </div>
            <button id="confirm-url-btn">确认</button>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
</body>
</html>
